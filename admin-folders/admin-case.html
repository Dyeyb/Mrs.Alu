<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard â€“ Mrs. Alu Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        :root{
            --gold:#c9a561;--gold-light:#e8c97a;--dark:#1a1a1a;--text:#2d2d2d;
            --border:#e5e0d8;--bg-page:#f4f1eb;--bg-hover:#f8f5f0;
            --shadow:0 4px 20px rgba(0,0,0,.08);--ease:all .35s cubic-bezier(.4,0,.2,1);
            --sidebar-w:270px;--sidebar-collapsed:68px;--topbar-h:70px;
            --primary-accent:#c9a561;--brown-dark:#2d1a08;--transition:all .35s cubic-bezier(.4,0,.2,1);
        }
        body{font-family:'Outfit',sans-serif;background:var(--bg-page);min-height:100vh;color:var(--text);display:flex;}

        /* â”€â”€ SIDEBAR â”€â”€ */
        .sidebar{width:var(--sidebar-w);min-height:100vh;display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:100;transition:width 0.3s cubic-bezier(0.4,0,0.2,1);overflow:hidden;}
        .sidebar.collapsed{width:var(--sidebar-collapsed);}
        .sidebar-bg{position:absolute;inset:0;background-image:url('https://images.unsplash.com/photo-1486325212027-8081e485255e?w=600&q=85&fit=crop&crop=center');background-size:cover;background-position:center 60%;filter:brightness(0.6) saturate(0.65) sepia(0.3);transition:transform 0.8s cubic-bezier(0.4,0,0.2,1),filter 0.4s ease;}
        .sidebar:hover .sidebar-bg{transform:scale(1.04);filter:brightness(0.7) saturate(0.75) sepia(0.2);}
        .sidebar-overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(36,18,6,0.93) 0%,rgba(74,46,24,0.72) 28%,rgba(107,66,38,0.40) 52%,rgba(74,46,24,0.68) 78%,rgba(28,14,4,0.95) 100%);pointer-events:none;}
        .sidebar-overlay::before{content:'';position:absolute;inset:0;background:linear-gradient(90deg,rgba(201,165,97,0.07) 0%,transparent 70%);}
        .sidebar>*:not(.sidebar-bg):not(.sidebar-overlay){position:relative;z-index:1;}
        .sidebar-logo{height:70px;padding:0 22px;display:flex;align-items:center;gap:12px;border-bottom:1px solid rgba(201,165,97,0.18);flex-shrink:0;text-decoration:none;}
        .logo-icon{width:42px;height:42px;flex-shrink:0;background:linear-gradient(135deg,rgba(74,46,24,0.85) 0%,var(--primary-accent) 100%);border-radius:10px;display:flex;align-items:center;justify-content:center;font-family:'Cormorant Garamond',serif;font-size:24px;font-weight:700;color:#fff;box-shadow:0 4px 18px rgba(201,165,97,0.45);border:1px solid rgba(201,165,97,0.4);}
        .logo-text-wrap{overflow:hidden;white-space:nowrap;}
        .logo-name{font-family:'Cormorant Garamond',serif;font-size:22px;font-weight:600;color:#fff;line-height:1;}
        .logo-name span{color:var(--primary-accent);font-style:italic;}
        .logo-sub{font-size:11px;color:rgba(255,255,255,0.42);letter-spacing:2px;text-transform:uppercase;margin-top:2px;}
        .sidebar.collapsed .logo-text-wrap{display:none;}
        .sidebar.collapsed .sidebar-logo{justify-content:center;gap:0;}
        .sidebar-nav{flex:1;padding:16px 0;overflow-y:auto;overflow-x:hidden;}
        .sidebar-nav::-webkit-scrollbar{width:3px;}
        .sidebar-nav::-webkit-scrollbar-thumb{background:rgba(201,165,97,0.25);border-radius:3px;}
        .nav-section-label{font-size:10px;font-weight:600;letter-spacing:2.5px;text-transform:uppercase;color:rgba(201,165,97,0.5);padding:16px 22px 8px;white-space:nowrap;overflow:hidden;}
        .sidebar.collapsed .nav-section-label{opacity:0;height:0;padding:0;}
        .nav-item{display:flex;align-items:center;gap:12px;padding:11px 22px;text-decoration:none;color:rgba(255,255,255,0.62);font-size:14px;font-weight:500;position:relative;cursor:pointer;transition:var(--transition);white-space:nowrap;}
        .nav-item::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px;background:transparent;transition:var(--transition);}
        .nav-item:hover{color:rgba(255,255,255,0.96);background:rgba(201,165,97,0.1);}
        .nav-item:hover::before{background:rgba(201,165,97,0.45);}
        .nav-item.active{color:var(--primary-accent);background:rgba(201,165,97,0.14);}
        .nav-item.active::before{background:var(--primary-accent);}
        .nav-item svg{width:18px;height:18px;flex-shrink:0;}
        .sidebar.collapsed .nav-item-label{opacity:0;width:0;overflow:hidden;}
        .sidebar.collapsed .nav-item{justify-content:center;padding:13px 0;gap:0;}
        .sidebar-bottom{padding:16px;border-top:1px solid rgba(201,165,97,0.15);flex-shrink:0;}
        .sidebar-user{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;cursor:pointer;border:1px solid rgba(201,165,97,0.18);background:rgba(0,0,0,0.25);backdrop-filter:blur(6px);transition:var(--transition);}
        .sidebar-user:hover{background:rgba(201,165,97,0.12);border-color:rgba(201,165,97,0.35);}
        .user-avatar{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--brown-dark),var(--primary-accent));display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;color:#fff;flex-shrink:0;border:1.5px solid rgba(201,165,97,0.45);}
        .user-info{overflow:hidden;}
        .user-name{font-size:13px;font-weight:600;color:#fff;white-space:nowrap;}
        .user-role{font-size:11px;color:rgba(255,255,255,0.4);white-space:nowrap;}
        .sidebar.collapsed .user-info{display:none;}
        .sidebar.collapsed .sidebar-user{justify-content:center;gap:0;}
        .collapse-btn{width:100%;background:none;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;color:rgba(255,255,255,0.32);font-size:12px;font-family:'Outfit',sans-serif;padding:10px 0 0;transition:var(--transition);}
        .collapse-btn:hover{color:var(--primary-accent);}
        .collapse-btn svg{width:16px;height:16px;transition:transform 0.3s;}
        .sidebar.collapsed .collapse-btn svg{transform:rotate(180deg);}
        .sidebar.collapsed .collapse-btn span{display:none;}

        /* â”€â”€ MAIN â”€â”€ */
        .main-wrap{margin-left:var(--sidebar-w);flex:1;min-height:100vh;display:flex;flex-direction:column;transition:margin-left 0.3s cubic-bezier(0.4,0,0.2,1);}
        .main-wrap.collapsed-main{margin-left:var(--sidebar-collapsed);}

        /* â”€â”€ TOPBAR â”€â”€ */
        .topbar{height:var(--topbar-h);background:#fff;border-bottom:1px solid var(--border);box-shadow:var(--shadow);display:flex;align-items:center;justify-content:space-between;padding:0 36px;position:sticky;top:0;z-index:100;}
        .topbar-title{font-family:'Cormorant Garamond',serif;font-size:26px;font-weight:600;color:var(--dark);}
        .topbar-title span{color:var(--gold);font-style:italic;}
        .topbar-crumb{display:flex;align-items:center;gap:6px;font-size:13px;color:#aaa;margin-top:2px;}
        .topbar-crumb a{color:#aaa;text-decoration:none;}
        .topbar-crumb a:hover{color:var(--gold);}
        .topbar-crumb .sep{color:#ddd;}
        .topbar-crumb .cur{color:var(--gold);font-weight:500;}
        .topbar-right{display:flex;align-items:center;gap:14px;}
        .tb-search{position:relative;display:flex;align-items:center;}
        .tb-search input{width:200px;padding:8px 36px 8px 14px;border:1px solid var(--border);border-radius:50px;font-family:'Outfit',sans-serif;font-size:13px;background:var(--bg-hover);outline:none;transition:var(--ease);color:var(--text);}
        .tb-search input:focus{border-color:var(--gold);width:240px;}
        .tb-search input::placeholder{color:#bbb;}
        .tb-search-btn{position:absolute;right:4px;width:28px;height:28px;background:var(--gold);border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;}
        .tb-search-btn svg{width:13px;height:13px;color:#fff;}
        .icon-btn{width:38px;height:38px;border-radius:50%;border:1px solid var(--border);background:var(--bg-hover);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--ease);position:relative;color:#888;}
        .icon-btn:hover{border-color:var(--gold);color:var(--gold);}
        .icon-btn svg{width:16px;height:16px;}
        .notif-dot{position:absolute;top:6px;right:7px;width:7px;height:7px;background:#e74c3c;border-radius:50%;border:1px solid #fff;}
        .tb-avatar{width:38px;height:38px;background:linear-gradient(135deg,#c9a561,#e8c97a);border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Cormorant Garamond',serif;font-size:18px;font-weight:700;color:#1a0e05;cursor:pointer;border:2px solid transparent;transition:var(--ease);}
        .tb-avatar:hover{border-color:var(--gold);}

        /* â”€â”€ FLASH â”€â”€ */
        .flash{margin:20px 36px 0;padding:12px 18px;border-radius:10px;font-size:13px;display:flex;align-items:center;gap:10px;}
        .flash-success{background:#f0fdf4;border:1px solid #bbf7d0;color:#166534;}
        .flash-error{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;}
        .flash svg{width:16px;height:16px;flex-shrink:0;}
        .flash-close{margin-left:auto;cursor:pointer;opacity:.5;font-size:18px;line-height:1;background:none;border:none;color:inherit;}
        .flash-close:hover{opacity:1;}

        /* â”€â”€ BUTTONS â€” fixed sizes â”€â”€ */
        .btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border-radius:8px;font-family:'Outfit',sans-serif;font-size:13px;font-weight:600;cursor:pointer;transition:var(--ease);border:none;text-decoration:none;line-height:1;white-space:nowrap;}
        .btn svg{width:14px;height:14px;flex-shrink:0;}
        /* Small variant â€” explicit override */
        .btn-sm{padding:5px 11px !important;font-size:12px !important;border-radius:6px !important;}
        .btn-sm svg{width:12px !important;height:12px !important;}

        .btn-primary{background:linear-gradient(135deg,#c9a561,#e8c97a);color:#1a0e05;box-shadow:0 2px 8px rgba(201,165,97,.3);}
        .btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 14px rgba(201,165,97,.4);}
        .btn-secondary{background:#f0ebe0;color:var(--text);border:1px solid var(--border);}
        .btn-secondary:hover{background:#e5ddd0;border-color:var(--gold);}
        .btn-edit{background:#eff6ff;color:#2563eb;border:1px solid #bfdbfe;}
        .btn-edit:hover{background:#dbeafe;}
        .btn-danger{background:#fef2f2;color:#dc2626;border:1px solid #fecaca;}
        .btn-danger:hover{background:#fee2e2;}

        /* â”€â”€ TAG â”€â”€ */
        .tag{display:inline-flex;align-items:center;padding:3px 9px;border-radius:20px;font-size:11px;font-weight:600;letter-spacing:.3px;}
        .tag-user{background:#f0fdf4;color:#166534;border:1px solid #bbf7d0;}
        .tag-admin{background:#fef3c7;color:#92400e;border:1px solid #fde68a;}

        /* â”€â”€ MODAL â”€â”€ */
        .modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(4px);z-index:1000;align-items:center;justify-content:center;}
        .modal-overlay.open{display:flex;}
        .modal{background:#fff;border-radius:16px;width:90%;max-width:520px;box-shadow:0 24px 60px rgba(0,0,0,.2);overflow:hidden;animation:fadeUp .3s ease-out both;}
        .modal-sm{max-width:420px;}
        .modal-header{display:flex;align-items:center;justify-content:space-between;padding:20px 26px;border-bottom:1px solid var(--border);background:#fefcf8;}
        .modal-title{font-family:'Cormorant Garamond',serif;font-size:21px;font-weight:600;color:var(--dark);}
        .modal-title span{color:var(--gold);font-style:italic;}
        .modal-close{width:30px;height:30px;border-radius:50%;border:1px solid var(--border);background:var(--bg-hover);display:flex;align-items:center;justify-content:center;cursor:pointer;color:#888;font-size:18px;line-height:1;transition:var(--ease);}
        .modal-close:hover{border-color:#dc2626;color:#dc2626;background:#fef2f2;}
        .modal-body{padding:24px 26px;}
        .modal-footer{display:flex;align-items:center;justify-content:flex-end;gap:10px;padding:16px 26px;border-top:1px solid var(--border);background:#fafaf8;}

        /* â”€â”€ FORM â”€â”€ */
        .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
        .form-group{display:flex;flex-direction:column;gap:5px;}
        .form-group.full{grid-column:1/-1;}
        .form-label{font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:#888;}
        .form-input,.form-select,.form-textarea{padding:9px 13px;border:1px solid var(--border);border-radius:8px;font-family:'Outfit',sans-serif;font-size:13px;background:#fafaf8;color:var(--text);outline:none;transition:var(--ease);}
        .form-input:focus,.form-select:focus,.form-textarea:focus{border-color:var(--gold);background:#fff;box-shadow:0 0 0 3px rgba(201,165,97,.1);}
        .form-textarea{resize:vertical;min-height:80px;}

        /* â”€â”€ STATS â”€â”€ */
        .stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:28px;}
        .stat-card{background:#fff;border:1px solid var(--border);border-radius:14px;padding:20px;box-shadow:var(--shadow);display:flex;align-items:flex-start;gap:14px;transition:var(--ease);}
        .stat-card:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(0,0,0,.1);}
        .stat-icon{width:46px;height:46px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
        .stat-icon svg{width:20px;height:20px;}
        .si-gold{background:rgba(201,165,97,.15);} .si-gold svg{color:var(--gold);}
        .si-blue{background:#eff6ff;} .si-blue svg{color:#2563eb;}
        .si-green{background:#f0fdf4;} .si-green svg{color:#16a34a;}
        .si-red{background:#fef2f2;} .si-red svg{color:#dc2626;}
        .stat-num{font-family:'Cormorant Garamond',serif;font-size:30px;font-weight:700;color:var(--dark);line-height:1;}
        .stat-label{font-size:12px;color:#999;margin-top:3px;font-weight:500;}
        .stat-delta{font-size:11px;margin-top:5px;font-weight:600;color:#16a34a;}

        /* â”€â”€ TABLE CARD â”€â”€ */
        .card{background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);overflow:hidden;}
        .card-header{display:flex;align-items:center;justify-content:space-between;padding:18px 22px;border-bottom:1px solid var(--border);}
        .card-title{font-family:'Cormorant Garamond',serif;font-size:19px;font-weight:600;color:var(--dark);}
        .card-title span{color:var(--gold);font-style:italic;}
        .table-wrap{overflow-x:auto;}
        table{width:100%;border-collapse:collapse;}
        thead th{padding:11px 18px;text-align:left;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:#bbb;border-bottom:1px solid var(--border);background:#fafaf8;}
        tbody tr{transition:background .15s;}
        tbody tr:hover{background:var(--bg-hover);}
        tbody td{padding:13px 18px;font-size:13px;color:var(--text);border-bottom:1px solid #f5f0ea;}
        tbody tr:last-child td{border-bottom:none;}
        .td-name{font-weight:600;color:var(--dark);}
        .td-sub{font-size:11px;color:#aaa;margin-top:2px;}
        .td-actions{display:flex;align-items:center;gap:6px;}

        /* â”€â”€ CONFIRM â”€â”€ */
        .confirm-body{padding:28px 26px;text-align:center;}
        .confirm-icon{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;}
        .confirm-icon svg{width:28px;height:28px;}
        .ci-delete{background:#fef2f2;} .ci-delete svg{color:#dc2626;}
        .confirm-title{font-family:'Cormorant Garamond',serif;font-size:21px;font-weight:600;color:var(--dark);margin-bottom:8px;}
        .confirm-desc{font-size:13px;color:#888;line-height:1.6;}
        .confirm-name{font-weight:700;color:var(--dark);}

        /* â”€â”€ ADD MODAL â”€â”€ */
        .add-form{display:grid;gap:14px;}

        /* â”€â”€ PAGE â”€â”€ */
        .page{flex:1;padding:32px 36px;}

        @keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
        .anim{animation:fadeUp .45s ease-out both;}
        .d1{animation-delay:.04s;}.d2{animation-delay:.08s;}.d3{animation-delay:.12s;}.d4{animation-delay:.16s;}.d5{animation-delay:.20s;}

        @media(max-width:1100px){.stats-grid{grid-template-columns:repeat(2,1fr);}}
        @media(max-width:768px){.sidebar{transform:translateX(-100%);}.main-wrap{margin-left:0;}.page{padding:20px;}.topbar{padding:0 20px;}.stats-grid{grid-template-columns:1fr;}}
    </style>
</head>
<body>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
    <div class="sidebar-bg"></div>
    <div class="sidebar-overlay"></div>
    <a href="admin-dashboard.html" class="sidebar-logo">
        <div class="logo-icon">M</div>
        <div class="logo-text-wrap">
            <div class="logo-name">Mrs.<span>Alu</span></div>
            <div class="logo-sub">Admin Panel</div>
        </div>
    </a>
    <nav class="sidebar-nav">
        <div class="nav-section-label">Main Menu</div>
        <a href="admin-dashboard.html" class="nav-item" data-label="Dashboard">
            <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/></svg>
            <span class="nav-item-label">Dashboard</span>
        </a>
        <div class="nav-section-label">User Management</div>
        <a href="admin-users.html" class="nav-item" data-label="All Users">
            <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/></svg>
            <span class="nav-item-label">All Users</span>
        </a>
        <a href="admin-add-user.html" class="nav-item" data-label="Add User">
            <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" y1="8" x2="19" y2="14"/><line x1="22" y1="11" x2="16" y2="11"/></svg>
            <span class="nav-item-label">Add User</span>
        </a>
        <div class="nav-section-label">Content</div>
        <a href="admin-products.html" class="nav-item" data-label="Products">
            <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M20 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
            <span class="nav-item-label">Products</span>
        </a>
        <a href="admin-news.html" class="nav-item" data-label="News">
            <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
            <span class="nav-item-label">News</span>
        </a>
        <a href="admin-case.html" class="nav-item active" data-label="Case">
            <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
            <span class="nav-item-label">Case</span>
        </a>
        <div class="nav-section-label">System</div>
        <a href="admin-settings.html" class="nav-item" data-label="Settings">
            <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
            <span class="nav-item-label">Settings</span>
        </a>
        <a href="admin-login.html" class="nav-item" data-label="Logout">
            <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16,17 21,12 16,7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
            <span class="nav-item-label">Logout</span>
        </a>
    </nav>
    <div class="sidebar-bottom">
        <div class="sidebar-user">
            <div class="user-avatar">A</div>
            <div class="user-info">
                <div class="user-name">Administrator</div>
                <div class="user-role">Super Admin</div>
            </div>
        </div>
        <button class="collapse-btn" onclick="toggleSidebar()">
            <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>
            <span>Collapse</span>
        </button>
    </div>
</aside>

<!-- MAIN -->
<div class="main-wrap" id="main-wrap">

    <header class="topbar">
        <div>
            <div class="topbar-title">Admin <span>Case</span></div>
            <div class="topbar-crumb">
                <a href="admin-dashboard.html">Dashboard</a>
                <span class="sep">â€º</span>
                <span class="cur">Case Studies</span>
            </div>
        </div>
        <div class="topbar-right">
            <div class="tb-search">
                <input type="text" id="search-input" placeholder="Search casesâ€¦" oninput="filterCases(this.value)">
                <button class="tb-search-btn">
                    <svg fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                </button>
            </div>
            <div class="icon-btn" title="Notifications">
                <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 0 1-3.46 0"/></svg>
                <div class="notif-dot"></div>
            </div>
            <div class="tb-avatar">A</div>
        </div>
    </header>

    <!-- FLASH -->
    <div class="flash flash-success anim" id="flash-msg" style="display:none;">
        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        <span id="flash-text">Action completed.</span>
        <button class="flash-close" onclick="hideFlash()">Ã—</button>
    </div>

    <div class="page">

        <!-- STATS -->
        <div class="stats-grid">
            <div class="stat-card anim d1">
                <div class="stat-icon si-blue">
                    <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
                </div>
                <div>
                    <div class="stat-num" id="stat-total">â€”</div>
                    <div class="stat-label">Total Cases</div>
                    <div class="stat-delta">â†‘ Live from DB</div>
                </div>
            </div>
            <div class="stat-card anim d2">
                <div class="stat-icon si-gold">
                    <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                </div>
                <div>
                    <div class="stat-num" id="stat-views">â€”</div>
                    <div class="stat-label">Total Views</div>
                    <div class="stat-delta">â†‘ Live from DB</div>
                </div>
            </div>
            <div class="stat-card anim d3">
                <div class="stat-icon si-green">
                    <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
                </div>
                <div>
                    <div class="stat-num" id="stat-cats">â€”</div>
                    <div class="stat-label">Categories</div>
                    <div class="stat-delta">â†‘ Live from DB</div>
                </div>
            </div>
            <div class="stat-card anim d4">
                <div class="stat-icon si-red">
                    <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                </div>
                <div>
                    <div class="stat-num" id="stat-recent">â€”</div>
                    <div class="stat-label">Added This Month</div>
                    <div class="stat-delta">â†‘ Live from DB</div>
                </div>
            </div>
        </div>

        <!-- CASES TABLE -->
        <div class="card anim d5">
            <div class="card-header">
                <div class="card-title">All <span>Case Studies</span></div>
                <!-- ADD BUTTON â€” properly sized -->
                <button class="btn btn-primary btn-sm" onclick="openAddModal()">
                    <svg fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                    Add Case
                </button>
            </div>
            <div class="table-wrap">
                <table>
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Category</th>
                            <th>Views</th>
                            <th>Date</th>
                            <th style="text-align:right;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="cases-tbody">
                        <tr><td colspan="5" style="text-align:center;padding:40px;color:#bbb;">
                            <div style="font-size:28px;margin-bottom:8px;">ðŸ“‹</div>
                            Loading casesâ€¦
                        </td></tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>

<!-- â•â• EDIT MODAL â•â• -->
<div class="modal-overlay" id="edit-modal">
    <div class="modal">
        <div class="modal-header">
            <div class="modal-title">Edit <span>Case</span></div>
            <button class="modal-close" onclick="closeModal('edit-modal')">Ã—</button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-group full">
                    <label class="form-label">Title *</label>
                    <input type="text" class="form-input" id="edit-title" placeholder="Case title">
                </div>
                <div class="form-group full">
                    <label class="form-label">Short Description</label>
                    <textarea class="form-textarea" id="edit-desc" placeholder="Short descriptionâ€¦"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-select" id="edit-category">
                        <option>Applications</option>
                        <option>Residential</option>
                        <option>Commercial</option>
                        <option>Healthcare</option>
                        <option>Education</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Next Case ID</label>
                    <input type="text" class="form-input" id="edit-next-id" placeholder="e.g. hospital">
                </div>
                <div class="form-group full">
                    <label class="form-label">Article (HTML allowed)</label>
                    <textarea class="form-textarea" id="edit-article" style="min-height:110px;" placeholder="<p>Full article contentâ€¦</p>"></textarea>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('edit-modal')">Cancel</button>
            <button class="btn btn-primary" id="save-btn" onclick="saveCase()">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                Save Changes
            </button>
        </div>
    </div>
</div>

<!-- â•â• ADD MODAL â•â• -->
<div class="modal-overlay" id="add-modal">
    <div class="modal">
        <div class="modal-header">
            <div class="modal-title">Add <span>Case</span></div>
            <button class="modal-close" onclick="closeModal('add-modal')">Ã—</button>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-group full">
                    <label class="form-label">Category</label>
                    <select class="form-select" id="add-category">
                        <option>Applications</option>
                        <option>Residential</option>
                        <option>Commercial</option>
                        <option>Healthcare</option>
                        <option>Education</option>
                    </select>
                </div>
                <div class="form-group full">
                    <label class="form-label">Title *</label>
                    <input type="text" class="form-input" id="add-title" placeholder="Case title">
                </div>
                <div class="form-group full">
                    <label class="form-label">Short Description</label>
                    <textarea class="form-textarea" id="add-desc" placeholder="Short descriptionâ€¦"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Next Case ID</label>
                    <input type="text" class="form-input" id="add-next-id" placeholder="e.g. hospital">
                </div>
                <div class="form-group">
                    <label class="form-label">Sort Order</label>
                    <input type="number" class="form-input" id="add-sort" placeholder="e.g. 10" value="99">
                </div>
                <div class="form-group full">
                    <label class="form-label">Article (HTML)</label>
                    <textarea class="form-textarea" id="add-article" style="min-height:90px;" placeholder="<p>Full article contentâ€¦</p>"></textarea>
                </div>
                <div id="add-error" style="display:none;grid-column:1/-1;background:#fef2f2;border:1px solid #fecaca;padding:10px 13px;border-radius:7px;font-size:12px;color:#dc2626;"></div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('add-modal')">Cancel</button>
            <button class="btn btn-primary" id="add-save-btn" onclick="addCase()">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                Add Case
            </button>
        </div>
    </div>
</div>

<!-- â•â• DELETE MODAL â•â• -->
<div class="modal-overlay" id="delete-modal">
    <div class="modal modal-sm">
        <div class="confirm-body">
            <div class="confirm-icon ci-delete">
                <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/></svg>
            </div>
            <div class="confirm-title">Delete Case?</div>
            <div class="confirm-desc">Permanently delete <span class="confirm-name" id="delete-name"></span>? This cannot be undone.</div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('delete-modal')">Cancel</button>
            <button class="btn btn-danger" id="confirm-delete-btn" onclick="confirmDelete()">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/></svg>
                Delete
            </button>
        </div>
    </div>
</div>

<script>
/* â”€â”€ CONFIG â”€â”€ */
const SUPABASE_URL = 'https://pdqhbxtxvxrwtkvymjlm.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBkcWhieHR4dnhyd3RrdnltamxtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE1NTEyMzIsImV4cCI6MjA4NzEyNzIzMn0.jKq6Zw1XWDYXkxdrkW6HscOpsOuUm0gcyBCwFsAwN9U';

/* â”€â”€ SUPABASE HELPERS â”€â”€ */
async function sbFetch(path, opts = {}) {
    const res = await fetch(`${SUPABASE_URL}/rest/v1/${path}`, {
        ...opts,
        headers: {
            'apikey': SUPABASE_KEY,
            'Authorization': `Bearer ${SUPABASE_KEY}`,
            'Content-Type': 'application/json',
            'Prefer': opts.method === 'DELETE' ? '' : 'return=representation',
            ...(opts.headers || {})
        }
    });
    if (!res.ok) {
        let msg = `HTTP ${res.status}`;
        try { const b = await res.json(); msg = b.message || b.error || msg; } catch(_){}
        throw new Error(msg);
    }
    if (res.status === 204) return null;
    return res.json();
}

const sbGet    = (t, q='')   => sbFetch(`${t}?${q}`);
const sbPost   = (t, d)      => sbFetch(t, { method:'POST', body: JSON.stringify(d) });
const sbPatch  = (t, id, d)  => sbFetch(`${t}?id=eq.${encodeURIComponent(id)}`, { method:'PATCH', body: JSON.stringify(d) });
const sbDelete = (t, id)     => sbFetch(`${t}?id=eq.${encodeURIComponent(id)}`, { method:'DELETE' });

/* â”€â”€ STATE â”€â”€ */
let allCases = [];
let editingId = null;
let deletingId = null;

/* â”€â”€ INIT â”€â”€ */
async function init() {
    try {
        const cases = await sbGet('cases', 'select=*&order=sort_order.asc');
        allCases = Array.isArray(cases) ? cases : [];
        updateStats();
        renderTable(allCases);
    } catch(err) {
        console.error(err);
        // Table doesn't exist yet â€” show helpful empty state
        document.getElementById('cases-tbody').innerHTML = `
            <tr><td colspan="5" style="text-align:center;padding:40px;color:#bbb;">
                <div style="font-size:28px;margin-bottom:8px;">ðŸ“‹</div>
                <div style="font-weight:600;color:#aaa;margin-bottom:4px;">No cases found</div>
                <div style="font-size:12px;">Create your first case study using the <strong>Add Case</strong> button above.</div>
            </td></tr>`;
        document.getElementById('stat-total').textContent = '0';
        document.getElementById('stat-views').textContent = '0';
        document.getElementById('stat-cats').textContent = '0';
        document.getElementById('stat-recent').textContent = '0';
    }
}

function updateStats() {
    document.getElementById('stat-total').textContent = allCases.length;
    const totalViews = allCases.reduce((s, c) => s + (c.views || 0), 0);
    document.getElementById('stat-views').textContent = totalViews.toLocaleString();
    const cats = new Set(allCases.map(c => c.category).filter(Boolean));
    document.getElementById('stat-cats').textContent = cats.size;
    const thisMonth = new Date();
    const recent = allCases.filter(c => {
        if (!c.created_at && !c.published_at) return false;
        const d = new Date(c.created_at || c.published_at);
        return d.getMonth() === thisMonth.getMonth() && d.getFullYear() === thisMonth.getFullYear();
    });
    document.getElementById('stat-recent').textContent = recent.length;
}

/* â”€â”€ RENDER TABLE â”€â”€ */
function renderTable(cases) {
    const tbody = document.getElementById('cases-tbody');
    if (!cases.length) {
        tbody.innerHTML = `<tr><td colspan="5" style="text-align:center;padding:40px;color:#bbb;">
            <div style="font-size:28px;margin-bottom:8px;">ðŸ“‹</div>
            <div style="font-weight:600;color:#aaa;margin-bottom:4px;">No cases found</div>
            <div style="font-size:12px;">Click <strong>Add Case</strong> to get started.</div>
        </td></tr>`;
        return;
    }
    tbody.innerHTML = cases.map(c => {
        const date = (c.published_at || c.created_at)
            ? new Date(c.published_at || c.created_at).toLocaleDateString('en-GB', { day:'2-digit', month:'short', year:'numeric' })
            : 'â€”';
        return `<tr>
            <td>
                <div class="td-name">${esc(c.title)}</div>
                <div class="td-sub">#${String(c.id).padStart(3,'0')}</div>
            </td>
            <td><span class="tag tag-user">${esc(c.category || 'â€”')}</span></td>
            <td>${(c.views || 0).toLocaleString()}</td>
            <td>${date}</td>
            <td style="text-align:right;">
                <div class="td-actions" style="justify-content:flex-end;">
                    <button class="btn btn-edit btn-sm" onclick="openEdit('${esc(c.id)}')">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                        Edit
                    </button>
                    <button class="btn btn-danger btn-sm" onclick="openDelete('${esc(c.id)}','${esc(c.title)}')">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/></svg>
                        Delete
                    </button>
                </div>
            </td>
        </tr>`;
    }).join('');
}

/* â”€â”€ SEARCH â”€â”€ */
function filterCases(q) {
    const s = q.toLowerCase().trim();
    if (!s) { renderTable(allCases); return; }
    renderTable(allCases.filter(c =>
        (c.title||'').toLowerCase().includes(s) ||
        (c.category||'').toLowerCase().includes(s) ||
        (c.id||'').toLowerCase().includes(s)
    ));
}

/* â”€â”€ ADD â”€â”€ */
function openAddModal() {
    document.getElementById('add-title').value = '';
    document.getElementById('add-desc').value = '';
    document.getElementById('add-article').value = '';
    document.getElementById('add-next-id').value = '';
    document.getElementById('add-sort').value = '99';
    document.getElementById('add-category').value = 'Applications';
    document.getElementById('add-error').style.display = 'none';
    openModal('add-modal');
    setTimeout(() => document.getElementById('add-title').focus(), 200);
}

async function addCase() {
    const title      = document.getElementById('add-title').value.trim();
    const category   = document.getElementById('add-category').value;
    const short_desc = document.getElementById('add-desc').value.trim();
    const article    = document.getElementById('add-article').value.trim();
    const next_id    = document.getElementById('add-next-id').value.trim();
    const sort_order = parseInt(document.getElementById('add-sort').value) || 99;

    const errEl = document.getElementById('add-error');
    if (!title) { errEl.textContent = 'Title is required.'; errEl.style.display='block'; return; }
    errEl.style.display = 'none';

    const btn = document.getElementById('add-save-btn');
    btn.disabled = true; btn.textContent = 'Addingâ€¦';

    try {
        // No 'id' sent â€” Supabase serial column auto-generates it
        const result = await sbPost('cases', { title, category, short_desc, article, next_id, sort_order, views: 0, published_at: new Date().toISOString() });
        const newCase = Array.isArray(result) ? result[0] : result;
        allCases.unshift(newCase);
        updateStats();
        renderTable(allCases);
        closeModal('add-modal');
        showFlash('success', `"${title}" added successfully.`);
    } catch(err) {
        errEl.textContent = 'Add failed: ' + err.message;
        errEl.style.display = 'block';
    } finally {
        btn.disabled = false;
        btn.innerHTML = `<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg> Add Case`;
    }
}

/* â”€â”€ EDIT â”€â”€ */
function openEdit(id) {
    const c = allCases.find(x => x.id === id);
    if (!c) return;
    editingId = id;
    document.getElementById('edit-title').value    = c.title      || '';
    document.getElementById('edit-desc').value     = c.short_desc || '';
    document.getElementById('edit-category').value = c.category   || 'Applications';
    document.getElementById('edit-next-id').value  = c.next_id    || '';
    document.getElementById('edit-article').value  = c.article    || '';
    openModal('edit-modal');
    setTimeout(() => document.getElementById('edit-title').focus(), 200);
}

async function saveCase() {
    if (!editingId) return;
    const btn = document.getElementById('save-btn');
    btn.disabled = true; btn.textContent = 'Savingâ€¦';

    const data = {
        title:      document.getElementById('edit-title').value.trim(),
        short_desc: document.getElementById('edit-desc').value.trim(),
        category:   document.getElementById('edit-category').value,
        next_id:    document.getElementById('edit-next-id').value.trim(),
        article:    document.getElementById('edit-article').value.trim(),
    };

    try {
        await sbPatch('cases', editingId, data);
        const idx = allCases.findIndex(x => x.id === editingId);
        if (idx > -1) allCases[idx] = { ...allCases[idx], ...data };
        renderTable(allCases);
        closeModal('edit-modal');
        showFlash('success', `"${data.title}" updated.`);
    } catch(err) {
        showFlash('error', 'Save failed: ' + err.message);
    } finally {
        btn.disabled = false;
        btn.innerHTML = `<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg> Save Changes`;
    }
}

/* â”€â”€ DELETE â”€â”€ */
function openDelete(id, title) {
    deletingId = id;
    document.getElementById('delete-name').textContent = `"${title}"`;
    openModal('delete-modal');
}

async function confirmDelete() {
    if (!deletingId) return;
    const btn = document.getElementById('confirm-delete-btn');
    btn.disabled = true; btn.textContent = 'Deletingâ€¦';
    try {
        await sbDelete('cases', deletingId);
        allCases = allCases.filter(x => x.id !== deletingId);
        updateStats();
        renderTable(allCases);
        closeModal('delete-modal');
        showFlash('success', 'Case deleted.');
        deletingId = null;
    } catch(err) {
        showFlash('error', 'Delete failed: ' + err.message);
    } finally {
        btn.disabled = false;
        btn.innerHTML = `<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/></svg> Delete`;
    }
}

/* â”€â”€ MODALS â”€â”€ */
function openModal(id)  { document.getElementById(id).classList.add('open'); }
function closeModal(id) { document.getElementById(id).classList.remove('open'); }
document.querySelectorAll('.modal-overlay').forEach(el => {
    el.addEventListener('click', e => { if (e.target === el) el.classList.remove('open'); });
});

/* â”€â”€ FLASH â”€â”€ */
function showFlash(type, msg) {
    const el = document.getElementById('flash-msg');
    el.className = `flash flash-${type} anim`;
    document.getElementById('flash-text').textContent = msg;
    el.style.display = 'flex';
    clearTimeout(window._ft);
    window._ft = setTimeout(hideFlash, 4000);
}
function hideFlash() { document.getElementById('flash-msg').style.display = 'none'; }

/* â”€â”€ SIDEBAR â”€â”€ */
function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('collapsed');
    document.getElementById('main-wrap').classList.toggle('collapsed-main');
}

/* â”€â”€ UTILS â”€â”€ */
function esc(s) {
    return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');
}

/* â”€â”€ BOOT â”€â”€ */
init();
</script>
</body>
</html>